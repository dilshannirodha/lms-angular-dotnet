<div class="p-6 max-w-6xl mx-auto">
  <h2 class="text-3xl font-bold mb-6">Student Management</h2>

  <!-- Form -->
  <form (submit)="addStudent(); $event.preventDefault()" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
    <input
      type="text"
      [(ngModel)]="newStudent.studentId"
      name="studentId"
      placeholder="Student Id"
      class="p-2 border rounded"
      required
    />
    <input
      type="text"
      [(ngModel)]="newStudent.username"
      name="username"
      placeholder="Username"
      class="p-2 border rounded"
      required
    />
    <input
      type="text"
      [(ngModel)]="newStudent.name"
      name="name"
      placeholder="Name"
      class="p-2 border rounded"
      required
    />
    <input
      type="text"
      [(ngModel)]="newStudent.address"
      name="address"
      placeholder="Address"
      class="p-2 border rounded"
      required
    />
    <input
      type="email"
      [(ngModel)]="newStudent.email"
      name="email"
      placeholder="Email"
      class="p-2 border rounded"
    />
    <input
      type="text"
      [(ngModel)]="newStudent.phone"
      name="phone"
      placeholder="Phone"
      class="p-2 border rounded"
    />
    <div class="md:col-span-2">
      <button
        type="submit"
        class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 w-full"
      >
        Add Student
      </button>
    </div>
  </form>

  <!-- Student Table -->
  <div class="overflow-x-auto">
    <table class="w-full table-auto border-collapse rounded overflow-hidden shadow">
      <thead class="bg-gray-200 text-gray-700">
        <tr>
          <th class="text-left px-4 py-2">Student ID</th>
          <th class="text-left px-4 py-2">Username</th>
          <th class="text-left px-4 py-2">Name</th>
          <th class="text-left px-4 py-2">Address</th>
          <th class="text-left px-4 py-2">Email</th>
          <th class="text-left px-4 py-2">Phone</th>
          <th class="text-left px-4 py-2">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let student of students" class="border-b">
          <ng-container *ngIf="!isEditing(student.studentId); else editRow">
            <td class="px-4 py-2">{{ student.studentId }}</td>
            <td class="px-4 py-2">{{ student.username }}</td>
            <td class="px-4 py-2">{{ student.name }}</td>
            <td class="px-4 py-2">{{ student.address }}</td>
            <td class="px-4 py-2">{{ student.email }}</td>
            <td class="px-4 py-2">{{ student.phone }}</td>
            <td class="px-4 py-2 space-x-2">
              <button
                class="text-blue-600 hover:underline"
                (click)="editStudent(student)"
              >
                Edit
              </button>
              <button
                class="text-red-600 hover:underline"
                (click)="deleteStudent(student.studentId)"
              >
                Delete
              </button>
            </td>
          </ng-container>

          <ng-template #editRow>
            <td class="px-4 py-2">
              <input
                type="text"
                [(ngModel)]="editingStudent!.username"
                name="editUserName"
                class="p-1 border rounded w-full"
              />
            </td>
            <td class="px-4 py-2">
              <input
                type="text"
                [(ngModel)]="editingStudent!.name"
                name="editName"
                class="p-1 border rounded w-full"
              />
            </td>
            <td class="px-4 py-2">
              <input
                type="text"
                [(ngModel)]="editingStudent!.address"
                name="editAddress"
                class="p-1 border rounded w-full"
              />
            </td>
            <td class="px-4 py-2">
              <input
                type="email"
                [(ngModel)]="editingStudent!.email"
                name="editEmail"
                class="p-1 border rounded w-full"
              />
            </td>
            <td class="px-4 py-2">
              <input
                type="text"
                [(ngModel)]="editingStudent!.phone"
                name="editPhone"
                class="p-1 border rounded w-full"
              />
            </td>
            <td class="px-4 py-2 space-x-2">
              <button
                class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700"
                (click)="updateStudent()"
              >
                Save
              </button>
              <button
                class="bg-gray-400 text-white px-3 py-1 rounded hover:bg-gray-500"
                (click)="editingStudent = null"
              >
                Cancel
              </button>
            </td>
          </ng-template>
        </tr>
      </tbody>
    </table>
  </div>
</div>
